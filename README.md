# Минимальный P2P мессенджер

Этот репозиторий содержит пример полностью клиентского чата, который работает без собственного сервера. Обмен сообщениями происходит напрямую между двумя браузерами через WebRTC, а данные шифруются библиотекой `libsodium`.

## Как запустить

1. Откройте `index.html` на каком‑нибудь веб‑сервере (например, Github Pages или `npx serve`).
2. Введите имя и нажмите «Создать чат». Появится ссылка‑приглашение.
3. Отправьте ссылку собеседнику. Он откроет её в браузере, после чего увидит текст, который нужно переслать обратно.
4. Вставьте полученный ответ в поле «Ответ от друга» и нажмите «Подключиться». После установления соединения сообщения идут напрямую между браузерами.

## Архитектура

- **Обмен peer‑to‑peer**: используется `SimplePeer` (WebRTC). Предложение (`offer`) и ответ (`answer`) пересылаются вручную через ссылку и текстовое поле, поэтому выделенный сервер не требуется. Для установления соединения используются публичные STUN‑серверы Google.
- **Шифрование**: каждый клиент генерирует пару ключей с помощью `libsodium` (`crypto_box_keypair`). Перед отправкой сообщение шифруется при помощи `crypto_secretbox_easy` с ключом, полученным из `crypto_box_beforenm`. Ключ выводится из ECDH между приватным ключом отправителя и публичным ключом получателя.
- **Управление ключами**: при первом запуске ключевая пара создаётся и сохраняется в `localStorage`, чтобы при перезагрузке страницы не терять идентичность пользователя.
- **Инициация соединения**: инициатор создаёт `offer` и формирует ссылку вида `https://example.com/#<данные>` (в них входят offer, публичный ключ и имя). Гость открывает ссылку, создаёт `answer` и отправляет его обратно любым удобным способом (например, по электронной почте). После того как инициатор вставит `answer`, соединение завершается, и участники могут обмениваться зашифрованными сообщениями по WebRTC‑каналу.

Этот пример демонстрирует принципы построения децентрализованных веб‑приложений: вся логика работает в браузере, данные хранятся только на клиентской стороне, а сервер используется лишь для отдачи статических файлов.
